<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Æ‡¶ø‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡ßÅ‡¶Æ‡ßú‡¶æ ‡¶¨‡¶ü - ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style-pumpkin.css">
    <style>
        body {
            padding-bottom: 80px !important;
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
        }
        
        .countdown-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 1000;
        }
        
        .countdown-number {
            font-size: 72px;
            font-weight: bold;
            color: #FF9800;
            margin: 20px 0;
            text-shadow: 0 0 20px rgba(255, 152, 0, 0.7);
        }
        
        .bonus-card {
            background: linear-gradient(135deg, #FFF3E0 0%, #FFECB3 100%);
            border: 2px solid #FFB74D;
        }
    </style>
</head>
<body class="font-sans">
    
    <div class="container mx-auto px-4 py-6">
        <!-- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
        <div class="pumpkin-header mb-6 fade-in">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold">‚≠ê ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶°</h1>
                    <p class="text-white/80 text-sm">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    <p class="text-xs text-white/60 mt-1" id="resetTime">‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>
                <i class="fas fa-star text-2xl text-white/80"></i>
            </div>
        </div>

        <!-- ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ -->
        <div class="pumpkin-card mb-6 text-center">
            <div class="mb-4">
                <h3 class="text-lg font-bold mb-2">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶°</h3>
                <div class="text-4xl font-bold text-orange-600" id="bonusAdsCounter">‡ß¶/‡ßß‡ß¶</div>
                <p class="text-gray-500 text-sm mt-2" id="bonusResetTimer">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</p>
            </div>
            
            <div class="mb-4">
                <div class="flex justify-between text-sm mb-1">
                    <span>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡ßá‡¶∏</span>
                    <span id="bonusProgressText">‡ß¶%</span>
                </div>
                <div class="pumpkin-progress">
                    <div id="bonusProgressBar" class="pumpkin-progress-fill" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶è‡¶∞‡ßü‡¶æ -->
        <div class="pumpkin-card bonus-card mb-6">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-star text-yellow-500 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-2">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶°</h3>
                <p class="text-gray-600">‡¶è‡¶á ‡¶è‡¶°‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶®</p>
                <div class="text-3xl font-bold text-green-600 mt-2">‡ßß‡ß¶.‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</div>
            </div>
            
            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-5 text-center mb-6">
                <h4 class="font-bold text-lg mb-3">üé¨ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶°</h4>
                <p class="text-gray-600 mb-3">‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶™‡¶æ‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <p class="text-xs text-gray-500" id="bonusAdStatus">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§</p>
            </div>
            
            <!-- ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ -->
            <div class="bg-orange-50 border-l-4 border-orange-400 p-4 mb-6">
                <div class="flex items-start">
                    <i class="fas fa-exclamation-circle text-orange-500 mt-1 mr-2"></i>
                    <div>
                        <p class="font-semibold text-orange-700">‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£:</p>
                        <p class="text-orange-600 text-sm">‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ <span class="font-bold">‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</span> ‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                </div>
            </div>
            
            <!-- ‡¶¨‡¶æ‡¶ü‡¶® -->
            <button onclick="showBonusAd()" id="watchBonusAdBtn" class="w-full pumpkin-btn bg-gradient-to-r from-yellow-500 to-orange-500 py-4 text-lg">
                <i class="fas fa-play mr-2"></i>
                ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
            </button>
            
            <div class="text-center mt-4">
                <p class="text-gray-500 text-sm" id="bonusRewardStatus">‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá</p>
                <p class="text-xs text-gray-400 mt-2" id="countdownInfo"></p>
            </div>
        </div>

        <!-- ‡¶§‡¶•‡ßç‡¶Ø -->
        <div class="pumpkin-card bg-gradient-to-r from-orange-50 to-yellow-50 border-orange-200">
            <div class="flex items-start">
                <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mr-3">
                    <i class="fas fa-info-circle text-orange-500"></i>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-800 mb-2">‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø</h4>
                    <div class="space-y-2">
                        <div class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                            <p class="text-gray-600 text-sm">‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ö‡¶ü‡ßã ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá</p>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                            <p class="text-gray-600 text-sm">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</p>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                            <p class="text-gray-600 text-sm">‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                            <p class="text-gray-600 text-sm">‡¶∞‡¶æ‡¶§ ‡ßß‡ß®‡¶ü‡¶æ‡ßü ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶π‡¶¨‡ßá</p>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                            <p class="text-gray-600 text-sm">‡¶è‡¶° ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ, ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡ßá‡¶§‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® -->
        <a href="tasks-pumpkin.html" class="block w-full pumpkin-btn mt-6 bg-gradient-to-r from-gray-500 to-gray-600">
            <i class="fas fa-arrow-left mr-2"></i>‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßá‡¶ú‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
        </a>
    </div>

    <!-- ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ -->
    <div class="pumpkin-nav">
        <div class="grid grid-cols-4 gap-1 px-2 py-3">
            <a href="index.html" class="nav-item">
                <i class="fas fa-home nav-icon"></i>
                <span class="nav-label">‡¶π‡ßã‡¶Æ</span>
            </a>
            <a href="tasks-pumpkin.html" class="nav-item active">
                <i class="fas fa-tasks nav-icon"></i>
                <span class="nav-label">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</span>
            </a>
            <a href="support-pumpkin.html" class="nav-item">
                <i class="fas fa-wallet nav-icon"></i>
                <span class="nav-label">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞</span>
            </a>
            <a href="profile-pumpkin.html" class="nav-item">
                <i class="fas fa-user nav-icon"></i>
                <span class="nav-label">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
            </a>
        </div>
    </div>

    <!-- ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá -->
    <div id="countdown-overlay" class="countdown-overlay">
        <div class="text-center">
            <i class="fas fa-hourglass-half text-white text-4xl mb-4"></i>
            <div id="countdown-text" class="text-white text-xl mb-2">‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</div>
            <div id="countdown-number" class="countdown-number">‡ßß‡ß¶</div>
            <div id="redirect-notice" class="text-gray-300 mt-4">‡¶è‡¶°‡¶ü‡¶ø ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡ßß‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá</div>
            <div class="text-yellow-300 mt-6 text-sm">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶° ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ
            </div>
        </div>
    </div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase-config.js"></script>
<script src="app-firebase-pumpkin.js"></script>

    <script>
        // Direct link ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü
        const adLinks = [
            "https://ferocitysuperintend.com/q3gtdwtif0?key=8fab9c833a59630b50874801fba88f73",
            "https://ferocitysuperintend.com/wzvdzr4ka?key=7a422407e8fedbc108da1c1da906f0a9",
            "https://otieu.com/4/9809044",
            "https://otieu.com/4/10095617",
            "https://otieu.com/4/9345167",
            "https://otieu.com/4/9569635",
            "https://otieu.com/4/10155431",
            "https://otieu.com/4/9550427",
            "https://ferocitysuperintend.com/img7n81xh8?key=60effca0c228e66afd204784027d8b16"
        ];
        
        let isBonusAdActive = false;
        let countdownInterval;
        let currentCountdown = 10;
        let openedTab = null;

        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá
        document.addEventListener('DOMContentLoaded', function() {
            initBonusAdsPage();
        });

        // ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶™‡ßá‡¶ú ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®
        function initBonusAdsPage() {
            updateBonusUI();
            updateBonusResetTimer();
            hideLoading();
        }

        function updateBonusUI() {
            const user = getUserData();
            if (user) {
                const bonusAdsWatched = user.today_bonus_ads || 0;
                document.getElementById('bonusAdsCounter').textContent = `${bonusAdsWatched}/‡ßß‡ß¶`;
                const progress = (bonusAdsWatched / 10) * 100;
                document.getElementById('bonusProgressBar').style.width = `${progress}%`;
                document.getElementById('bonusProgressText').textContent = `${Math.round(progress)}%`;
                
                // ‡¶Ø‡¶¶‡¶ø ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑ ‡¶π‡ßü
                const watchBtn = document.getElementById('watchBonusAdBtn');
                if (!canWatchMoreBonusAds()) {
                    watchBtn.disabled = true;
                    watchBtn.innerHTML = '<i class="fas fa-clock mr-2"></i>‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑';
                    watchBtn.classList.add('bg-gray-400');
                    watchBtn.classList.remove('from-yellow-500', 'to-orange-500');
                    document.getElementById('bonusAdStatus').textContent = '‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑';
                    document.getElementById('bonusAdStatus').className = 'text-xs text-red-600';
                } else {
                    watchBtn.disabled = false;
                    watchBtn.classList.remove('bg-gray-400');
                    watchBtn.classList.add('bg-gradient-to-r', 'from-yellow-500', 'to-orange-500');
                }
            }
        }

        function updateBonusResetTimer() {
            const timeUntilReset = getTimeUntilNextBonusReset();
            document.getElementById('bonusResetTimer').textContent = `‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® (‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ${timeUntilReset})`;
            document.getElementById('resetTime').textContent = `‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ${timeUntilReset}`;
        }

        // ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì
        async function showBonusAd() {
            const user = getUserData();
            if (!user) {
                alert('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶ú ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                return;
            }

            // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶Ü‡¶∞‡ßã ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
            if (!canWatchMoreBonusAds()) {
                alert('‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑! ' + getTimeUntilNextBonusReset() + ' ‡¶™‡¶∞ ‡¶∞‡¶æ‡¶§ ‡ßß‡ß®‡¶ü‡¶æ‡ßü ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶π‡¶¨‡ßá‡•§');
                return;
            }

            if (isBonusAdActive) {
                return;
            }

            isBonusAdActive = true;
            
            // Disable button and show loading
            const watchBtn = document.getElementById('watchBonusAdBtn');
            watchBtn.disabled = true;
            watchBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>‡¶è‡¶° ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            document.getElementById('bonusAdStatus').textContent = '‡¶è‡¶° ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            document.getElementById('bonusAdStatus').className = 'text-xs text-blue-600';
            
            // ‡ßß ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞‡ßá ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßã ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã
            setTimeout(() => {
                openRandomAdAndStartCountdown();
            }, 1000);
        }

        // ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶è‡¶° ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßã ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã
        function openRandomAdAndStartCountdown() {
            // ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßã
            const randomIndex = Math.floor(Math.random() * adLinks.length);
            const selectedLink = adLinks[randomIndex];
            
            // ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶ñ‡ßÅ‡¶≤‡ßã
            openedTab = window.open(selectedLink, '_blank');
            
            if (!openedTab) {
                showNotification('‚ö†Ô∏è ‡¶™‡¶™‡¶Ü‡¶™ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá! ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡¶™‡¶Ü‡¶™ ‡¶Ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
                resetBonusAdButton();
                isBonusAdActive = false;
                return;
            }
            
            // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
            const watchBtn = document.getElementById('watchBonusAdBtn');
            watchBtn.innerHTML = '<i class="fas fa-clock mr-2"></i>‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...';
            
            // ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì
            const overlay = document.getElementById('countdown-overlay');
            const countdownNumber = document.getElementById('countdown-number');
            const countdownText = document.getElementById('countdown-text');
            
            overlay.style.display = 'flex';
            currentCountdown = 10;
            countdownNumber.textContent = currentCountdown;
            countdownText.textContent = '‡¶è‡¶°‡¶ü‡¶ø ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!';
            
            // ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã
            countdownInterval = setInterval(() => {
                currentCountdown--;
                countdownNumber.textContent = currentCountdown;
                
                if (currentCountdown <= 0) {
                    clearInterval(countdownInterval);
                    finishAdViewing();
                }
            }, 1000);
        }

        // ‡¶è‡¶° ‡¶≠‡¶ø‡¶â‡¶á‡¶Ç ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ï‡¶∞‡ßã
        async function finishAdViewing() {
            const user = getUserData();
            if (!user) {
                alert('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßá‡¶ú ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                return;
            }
            
            // ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
            const countdownNumber = document.getElementById('countdown-number');
            const countdownText = document.getElementById('countdown-text');
            
            countdownText.textContent = '‡¶è‡¶° ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!';
            countdownNumber.textContent = '‚úì';
            countdownNumber.style.color = '#10B981';
            
            // ‡ßß.‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßã
            setTimeout(async () => {
                const overlay = document.getElementById('countdown-overlay');
                overlay.style.display = 'none';
                
                try {
                    // ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®
                    await giveBonusReward();
                } catch (error) {
                    console.error('Error giving reward:', error);
                    alert('‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                    resetBonusAdButton();
                    isBonusAdActive = false;
                }
            }, 1500);
        }

        // ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®
        async function giveBonusReward() {
            try {
                const user = getUserData();
                
                // ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü
                const newBonusAdCount = (user.today_bonus_ads || 0) + 1;
                
                // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶ø ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶Ö‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶Æ ‡¶ï‡¶∞‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
                if (newBonusAdCount > 10) {
                    alert('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶∞‡¶æ‡¶§ ‡ßß‡ß®‡¶ü‡¶æ‡ßü ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                    resetBonusAdButton();
                    isBonusAdActive = false;
                    return;
                }
                
                // Supabase ‡¶è ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶ø
                await updateUserData({ 
                    balance: (user.balance || 0) + 10,
                    total_income: (user.total_income || 0) + 10,
                    today_bonus_ads: newBonusAdCount,
                    total_ads: (user.total_ads || 0) + 1
                });
                
                // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
                updateBonusUI();
                updateBonusResetTimer();
                
                // ‡¶∏‡¶´‡¶≤ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
                document.getElementById('bonusAdStatus').textContent = '‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá';
                document.getElementById('bonusAdStatus').className = 'text-xs text-green-600';
                document.getElementById('bonusRewardStatus').textContent = '‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!';
                document.getElementById('bonusRewardStatus').className = 'text-sm text-green-600 font-semibold';
                document.getElementById('countdownInfo').textContent = '‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!';
                document.getElementById('countdownInfo').className = 'text-xs text-green-600';
                
                // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
                const watchBtn = document.getElementById('watchBonusAdBtn');
                watchBtn.innerHTML = '<i class="fas fa-check mr-2"></i>‡¶∏‡¶´‡¶≤! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá';
                watchBtn.classList.remove('from-yellow-500', 'to-orange-500');
                watchBtn.classList.add('bg-green-500');
                
                alert('üéâ ‡¶∏‡¶´‡¶≤! ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡•§ ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
                
                // ‡ß™ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
                setTimeout(() => {
                    if (canWatchMoreBonusAds()) {
                        resetBonusAdButton();
                    }
                    isBonusAdActive = false;
                }, 4000);
                
            } catch (error) {
                console.error('Error updating bonus reward:', error);
                alert('‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: ' + error.message);
                resetBonusAdButton();
                isBonusAdActive = false;
                throw error;
            }
        }

        function resetBonusAdButton() {
            if (canWatchMoreBonusAds()) {
                const watchBtn = document.getElementById('watchBonusAdBtn');
                watchBtn.disabled = false;
                watchBtn.innerHTML = '<i class="fas fa-play mr-2"></i>‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
                watchBtn.classList.remove('bg-green-500', 'bg-red-500', 'bg-gray-400');
                watchBtn.classList.add('bg-gradient-to-r', 'from-yellow-500', 'to-orange-500');
                document.getElementById('bonusAdStatus').textContent = '‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§';
                document.getElementById('bonusAdStatus').className = 'text-xs text-green-600';
                document.getElementById('bonusRewardStatus').textContent = '‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá';
                document.getElementById('bonusRewardStatus').className = 'text-gray-500 text-sm';
                document.getElementById('countdownInfo').textContent = '';
            }
        }

        // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
        setInterval(updateBonusResetTimer, 60000);
        
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initBonusAdsPage, 1000);
        });
    </script>
</body>
</html>