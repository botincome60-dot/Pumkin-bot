<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Æ‡¶ø‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡ßÅ‡¶Æ‡ßú‡¶æ ‡¶¨‡¶ü - ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style-pumpkin.css">
    <style>
        body {
            padding-bottom: 80px !important;
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 2px solid #FFE0B2;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 152, 0, 0.1);
        }
        
        .action-item {
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .action-item:hover {
            border-left-color: #FF9800;
            background-color: #FFF3E0;
        }
        
        .user-avatar {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            font-weight: bold;
            margin: 0 auto;
        }
    </style>
</head>
<body class="font-sans">
    <!-- ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá -->
    <div id="loadingOverlay" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="pumpkin-spinner"></div>
            <p class="text-gray-600 mt-4 text-lg">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        </div>
    </div>

    <div class="container mx-auto px-4 py-6">
        <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
        <div class="pumpkin-header mb-6 fade-in">
            <div class="flex items-center space-x-4">
                <div class="user-avatar">
                    <span id="avatarText">U</span>
                </div>
                <div class="flex-1">
                    <h2 class="text-xl font-bold" id="profileName">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</h2>
                    <p class="text-white/80 text-sm mt-1">‡¶Æ‡¶ø‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡ßÅ‡¶Æ‡ßú‡¶æ ‡¶¨‡¶ü ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</p>
                    <div class="flex items-center mt-2">
                        <span class="text-xs bg-white/20 px-2 py-1 rounded-full">
                            ‡¶Ü‡¶á‡¶°‡¶ø: <span id="profileUserId" class="font-mono">‡ß¶</span>
                        </span>
                        <span class="text-xs bg-white/20 px-2 py-1 rounded-full ml-2">
                            <i class="fas fa-calendar-alt mr-1"></i>
                            <span id="joinDays">‡ßß</span> ‡¶¶‡¶ø‡¶®
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ó‡ßç‡¶∞‡¶ø‡¶° -->
        <div class="pumpkin-card mb-6">
            <h3 class="text-lg font-bold mb-4 text-gray-800">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-wallet text-blue-500"></i>
                    </div>
                    <p class="text-gray-600 text-sm">‡¶Æ‡ßã‡¶ü ‡¶Ü‡ßü</p>
                    <p class="font-bold text-lg" id="profileTotalIncome">‡ß¶.‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                </div>
                
                <div class="stat-card">
                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-eye text-green-500"></i>
                    </div>
                    <p class="text-gray-600 text-sm">‡¶Æ‡ßã‡¶ü ‡¶è‡¶°‡¶∏</p>
                    <p class="font-bold text-lg" id="profileTotalAds">‡ß¶</p>
                </div>
                
                <div class="stat-card">
                    <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-users text-purple-500"></i>
                    </div>
                    <p class="text-gray-600 text-sm">‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤</p>
                    <p class="font-bold text-lg" id="profileReferrals">‡ß¶</p>
                </div>
                
                <div class="stat-card">
                    <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-chart-line text-yellow-500"></i>
                    </div>
                    <p class="text-gray-600 text-sm">‡¶∏‡¶´‡¶≤ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞</p>
                    <p class="font-bold text-lg" id="withdrawCount">‡ß¶</p>
                </div>
            </div>
        </div>

        <!-- ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ -->
        <div class="pumpkin-card mb-6">
            <h3 class="text-lg font-bold mb-4 text-gray-800">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡¶ø‡¶ü‡¶ø</h3>
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-orange-50 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-play-circle text-orange-500 mr-3"></i>
                        <div>
                            <p class="font-medium">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶è‡¶°</p>
                            <p class="text-gray-600 text-sm" id="todayAdsCount">‡ß¶/‡ßß‡ß¶</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-medium text-green-600" id="todayEarning">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                        <p class="text-gray-600 text-sm">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ü‡ßü</p>
                    </div>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-star text-green-500 mr-3"></i>
                        <div>
                            <p class="font-medium">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶°</p>
                            <p class="text-gray-600 text-sm" id="todayBonusAds">‡ß¶/‡ßß‡ß¶</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-medium text-green-600" id="bonusEarning">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                        <p class="text-gray-600 text-sm">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ü‡ßü</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‡¶è‡¶ï‡¶∂‡¶® ‡¶Æ‡ßá‡¶®‡ßÅ -->
        <div class="pumpkin-card mb-6">
            <h3 class="text-lg font-bold mb-4 text-gray-800">‡¶è‡¶ï‡¶∂‡¶®‡¶∏</h3>
            <div class="space-y-2">
                <a href="#" class="action-item flex items-center p-3 border border-gray-200 rounded-xl">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-history text-blue-500"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold">‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø</p>
                        <p class="text-gray-600 text-sm">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </a>
                
                <a href="#" class="action-item flex items-center p-3 border border-gray-200 rounded-xl">
                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-gift text-green-500"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°‡¶∏</p>
                        <p class="text-gray-600 text-sm">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶ì ‡¶â‡¶™‡¶π‡¶æ‡¶∞</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </a>
                
                <button onclick="shareProfile()" class="action-item w-full flex items-center p-3 border border-gray-200 rounded-xl text-left">
                    <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-share-alt text-purple-500"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                        <p class="text-gray-600 text-sm">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                    <i class="fas fa-external-link-alt text-gray-400"></i>
                </button>
            </div>
        </div>

        <!-- ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ -->
        <div class="pumpkin-card">
            <h3 class="text-lg font-bold mb-4 text-gray-800">‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
            <div class="space-y-2">
                <a href="#" class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">
                    <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-shield-alt text-yellow-500"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold">‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶∏‡¶ø ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø</p>
                        <p class="text-gray-600 text-sm">‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ó‡ßã‡¶™‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ ‡¶®‡ßÄ‡¶§‡¶ø</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </a>
                
                <a href="#" class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">
                    <div class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-file-alt text-gray-500"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold">‡¶ü‡¶æ‡¶∞‡ßç‡¶Æ‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶° ‡¶ï‡¶®‡ßç‡¶°‡¶ø‡¶∂‡¶®</p>
                        <p class="text-gray-600 text-sm">‡¶∏‡ßá‡¶¨‡¶æ‡¶∞ ‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </a>
                
                <a href="https://t.me/mishti_kumra_support" target="_blank" class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">
                    <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-headset text-red-500"></i>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold">‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ì ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø</p>
                        <p class="text-gray-600 text-sm">‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                    <i class="fas fa-external-link-alt text-gray-400"></i>
                </a>
            </div>
        </div>

        <!-- ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® -->
        <button onclick="logout()" class="w-full pumpkin-btn mt-6 bg-gradient-to-r from-red-500 to-red-600">
            <i class="fas fa-sign-out-alt mr-2"></i>
            ‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü
        </button>
    </div>

    <!-- ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ -->
    <div class="pumpkin-nav">
        <div class="grid grid-cols-4 gap-1 px-2 py-3">
            <a href="index.html" class="nav-item">
                <i class="fas fa-home nav-icon"></i>
                <span class="nav-label">‡¶π‡ßã‡¶Æ</span>
            </a>
            <a href="tasks-pumpkin.html" class="nav-item">
                <i class="fas fa-tasks nav-icon"></i>
                <span class="nav-label">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</span>
            </a>
            <a href="support-pumpkin.html" class="nav-item">
                <i class="fas fa-wallet nav-icon"></i>
                <span class="nav-label">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞</span>
            </a>
            <a href="profile-pumpkin.html" class="nav-item active">
                <i class="fas fa-user nav-icon"></i>
                <span class="nav-label">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
            </a>
        </div>
    </div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase-config.js"></script>
<script src="app-firebase-pumpkin.js"></script>
    <script>
        function initProfilePage() {
            const user = getUserData();
            if (user) {
                // ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø
                document.getElementById('profileName').textContent = user.first_name || '‡¶á‡¶â‡¶ú‡¶æ‡¶∞';
                document.getElementById('avatarText').textContent = user.first_name ? user.first_name.charAt(0).toUpperCase() : 'U';
                document.getElementById('profileUserId').textContent = user.id;
                
                // ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶∏
                document.getElementById('profileTotalIncome').textContent = user.total_income.toFixed(2) + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
                document.getElementById('profileTotalAds').textContent = user.total_ads;
                document.getElementById('profileReferrals').textContent = user.total_referrals;
                
                // ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠‡¶ø‡¶ü‡¶ø
                document.getElementById('todayAdsCount').textContent = `${user.today_ads || 0}/‡ßß‡ß¶`;
                document.getElementById('todayBonusAds').textContent = `${user.today_bonus_ads || 0}/‡ßß‡ß¶`;
                
                // ‡¶Ü‡ßü ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶∂‡¶®
                const todayEarning = (user.today_ads || 0) * 30;
                const bonusEarning = (user.today_bonus_ads || 0) * 10;
                document.getElementById('todayEarning').textContent = todayEarning + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
                document.getElementById('bonusEarning').textContent = bonusEarning + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
                
                // ‡¶ú‡ßü‡¶® ‡¶¶‡¶ø‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶∂‡¶®
                const joinDate = new Date(user.join_date || Date.now());
                const today = new Date();
                const diffTime = Math.abs(today - joinDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                document.getElementById('joinDays').textContent = diffDays;
                
                // Withdraw count (placeholder)
                document.getElementById('withdrawCount').textContent = '‡ß¶';
            }
            hideLoading();
        }

        function shareProfile() {
            const user = getUserData();
            if (!user) {
                alert('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø‡•§');
                return;
            }
            
            const shareText = `üéÉ ‡¶Æ‡¶ø‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡ßÅ‡¶Æ‡ßú‡¶æ ‡¶¨‡¶ü-‡¶è ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤\n\n` +
                             `üë§ ‡¶®‡¶æ‡¶Æ: ${user.first_name}\n` +
                             `üí∞ ‡¶Æ‡ßã‡¶ü ‡¶Ü‡ßü: ${user.total_income.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ\n` +
                             `üìä ‡¶Æ‡ßã‡¶ü ‡¶è‡¶°: ${user.total_ads}\n` +
                             `üë• ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤: ${user.total_referrals}\n\n` +
                             `‡¶Ü‡¶™‡¶®‡¶ø‡¶ì ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®: https://t.me/mishti_kumra_bot`;
            
            if (navigator.share) {
                navigator.share({
                    title: '‡¶Æ‡¶ø‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡ßÅ‡¶Æ‡ßú‡¶æ ‡¶¨‡¶ü ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤',
                    text: shareText,
                    url: 'https://t.me/mishti_kumra_bot'
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'success');
                });
            }
        }

        function logout() {
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                if (window.Telegram && Telegram.WebApp) {
                    Telegram.WebApp.close();
                } else {
                    alert('‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü ‡¶∏‡¶´‡¶≤!');
                    window.location.href = 'index.html';
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initProfilePage, 1000);
        });
    </script>
</body>
</html>